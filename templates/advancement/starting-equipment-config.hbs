<form autocomplete="off">
    {{> "dnd5e.advancement-controls"}}

    {{#if showStartingWealth}}
    <div class="form-group">
        <label>{{ localize "DND5E.Advancement.StartingEquipment.Wealth.Label" }}</label>
        <div class="form-fields">
            <input type="text" name="configuration.wealth" value="{{ configuration.wealth }}">
        </div>
        <p class="hint">{{ localize "DND5E.Advancement.StartingEquipment.Wealth.Hint" }}</p>
    </div>
    {{/if}}

    {{#*inline "list-level"}}
    <ul class="flexcol">
        {{#each entries}}
        <li data-entry-id="{{ id }}" data-entry-type="{{ entry.type }}" data-depth="{{ depth }}">
            <div class="controls flexrow">
                <select name="configuration.pool.{{ id }}.type">
                    {{selectOptions validTypes selected=entry.type localize=true}}
                </select>
                <button type="button" class="unbutton" data-action="delete-entry"
                        data-tooltip="DND5E.Advancement.StartingEquipment.Action.RemoveEntry"
                        aria-label="{{ localize 'DND5E.Advancement.StartingEquipment.Action.RemoveEntry' }}">
                    <i class="fa-solid fa-trash fa-fw" inert></i>
                </button>
            </div>
            <div class="data flexrow">
                {{#if groupType}}
                {{> "list-level" entries=children nested=true}}
                {{else}}
                {{numberInput entry.count name=(concat "configuration.pool." id ".count") placeholder=1 step=1 min=1}}
                {{#if (eq entry.type "linked")}}
                {{#if linked}}
                {{{dnd5e-linkForUuid entry.key}}}
                {{else}}
                <div class="drop-area">
                    {{localize "DND5E.Advancement.StartingEquipment.DropHint"}}
                </div>
                {{/if}}
                <input type="hidden" name="configuration.pool.{{ id }}.key" value="{{ entry.key }}">
                {{else}}
                <select name="configuration.pool.{{ id }}.key">
                    {{selectOptions entry.keyOptions selected=entry.key blank=entry.blankLabel}}
                </select>
                {{/if}}
                {{/if}}
            </div>
            <div class="drag-bar"><i class="fa-solid fa-grip-lines-vertical" inert></i></div>
            <input type="hidden" name="configuration.pool.{{ id }}._id" value="{{ entry._id }}">
            <input type="hidden" name="configuration.pool.{{ id }}.group" value="{{ entry.group }}">
            <input type="hidden" name="configuration.pool.{{ id }}.sort" value="{{ entry.sort }}" data-dtype="Number">
            <input type="hidden" name="configuration.pool.{{ id }}.requiresProficiency"
                   value="{{ entry.requiresProficiency }}" data-dtype="Boolean">
        </li>
        {{/each}}
        <li data-depth="{{ depth }}">
            <button type="button" data-action="add-entry">
                <i class="fa-solid fa-plus" inert></i>
                {{ localize "DND5E.Advancement.StartingEquipment.Action.AddEntry" }}
            </button>
        </li>
    </ul>
    {{/inline}}

    {{> "list-level"}}
</form>
